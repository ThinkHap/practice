<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <title>kissy-mvc-note-demo</title>
    <style>
        .note {
            border: 1px solid red;
        }
    </style>
    <script src="http://a.tbcdn.cn/s/kissy/1.3.0/seed-min.js" charset="utf-8"></script>
</head>
<body>

<h1 style="width:400px;margin: 10px auto;">KISSY NoteBook</h1>
<!--搜索列表界面-->
<div id="search" style="display:none" class="page">
    <p><input class="searchInput" /> <button class="searchBtn">search by name </button>
        &nbsp;
        <input class="backBtn" type="button" value="back"/>
    </p>
    <div class="searchList">

    </div>
</div>


<!--笔记列表的搜索模板-->
<script type="template" id="searchTpl">
    {{#each list}}
    <div id='{{id}}' class='note'>
        <p>{{title}} @ {{time}}</p>
    </div>
    {{/each}}
</script>

<!--笔记列表主界面-->
<div id="list" style="display:none" class="page">
    <div>
        <button class="newNote">new</button>
        <button class="refreshNote">refresh</button>
        &nbsp;
        <input class="searchInput" /> <button class="searchNote">search by name </button>
    </div>
    <!--笔记列表容器-->
    <div class="dataList">

    </div>

    <div>
        Recent Changed/Created/Deleted Note @ <span class="statistic"></span>
    </div>

</div>

<!--编辑笔记界面容器-->
<div id="edit" style="display:none" class="page">
</div>

<div id="loading">
    <h2 style="width:300px;margin: 100px auto;">Loading ...</h2>
</div>


<!-- 单个笔记的模板 -->
<script type="template" id="noteTpl">
    <p>{{note.title}} @ {{note.time}}</p>
    <button class="edit">edit/view</button>
    <button class="delete">delete</button>
</script>

<!--笔记列表的模板-->
<script type="template" id="listTpl">
    {{#each list}}
    <div id='{{id}}' class='note'>
        <p>{{title}} @ {{time}}</p>
        <button class="edit">edit/view</button>
        <button class="delete">delete</button>
    </div>
    {{/each}}
</script>

<!--编辑笔记界面的模板-->
<script type="template" id="detailTpl">
    <p>title：<input class='title' value='{{note.title}}'/></p>
    <p>content:<textarea style="width:200px;height:200px;" class="content">{{note.content}}</textarea></p>
    <button class="submit">submit</button>
</script>


<script src="src/note/EditView.js"></script>
<script src="src/note/NoteModel.js"></script>
<script src="src/note/NotesCollection.js"></script>
<script src="src/note/NotesView.js"></script>
<script src="src/note/NoteView.js"></script>
<script src="src/note/router.js"></script>
<script src="src/note/sync.js"></script>
<script src="src/note/SearchView.js"></script>
<script>
    //KISSY.config({
    //   packages:[
    //        {
    //            name:'note',
    //            tag:'201111211221',
    //            path:'..'
    //        }
    //   ]
    //});
    KISSY.add('note/main-html5', function(S, Node, MVC, NoteRouter, Sy) {
        console.log(location.pathname);
        new NoteRouter();
        /**
         * 启动 app router
         */
        MVC.Router.start({
            // 触发当前地址对应的 route 操作
            triggerRoute: true,
            nativeHistory: true,
            urlRoot: location.pathname,
            //urlRoot: 'http://www.taobao.com/',
            success: function() {
                Node.all('#loading').hide();
            }
        });
    }, {
        requires:['node', 'mvc', 'router','sync']
    });
    KISSY.use("note/main-html5");
</script>
</body>
</html>

