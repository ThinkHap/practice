<!DOCTYPE html>
<html>
    <head>
        <meta charset="gbk" />
        <title>shake demo</title>
        <style type="text/css">
            body, form, h1, h2, h3, h4, p, img, ul, li, ol, dl, dt, dd, a, span, input, tr, th, td{margin:0;padding:0;}
		    body {font:normal 12px/1.5 "Arial","宋体","Simsun","Tahoma",sans-serif;}
		    li {list-style:none;}
		    img {border:0 none;vertical-align:top;}
		    table {border-collapse:collapse;border-spacing:0;}
            .clear-fix:after {display:block;visibility:hidden;font-size:0;line-height:0;clear:both;content:"";}  
            .clear-fix {zoom:1;}
		    a {color:#000;text-decoration:none;}
		    a:hover {color:#f44;text-decoration:underline;}
        </style>
        <script src="https://s.tbcdn.cn/s/kissy/1.2.0/kissy-min.js"></script>
    </head>
    <body>
        <div id="container" class="container">
        
        </div>
        <script>
            if (window.DeviceMotionEvent) {
            	window.addEventListener('devicemotion', deviceMotionHandler, false);
            } 
            
            //敏感系数
            var SHAKE_THRESHOLD = 8;
            var lastUpdate = 0;
            var x, y, z, last_x, last_y, last_z;
            
            function deviceMotionHandler(eventData) {
              // Grab the acceleration including gravity from the results
              var acceleration = eventData.accelerationIncludingGravity;
            
              var curTime = new Date().getTime();
            
              if ((curTime - lastUpdate) > 100) {
            
                  var diffTime = (curTime - lastUpdate);
                  lastUpdate = curTime;
            
                  x = acceleration.x;
                  y = acceleration.y;
                  z = acceleration.z;
            
                  var speed = Math.abs(x+y+z-last_x-last_y-last_z);
            
            	  document.getElementById("container").innerHTML = document.getElementById("container").innerHTML + "<br />" + speed;
                  
            	  if (speed > SHAKE_THRESHOLD) {
            			alert("shaked!");
                  }
                  last_x = x;
                  last_y = y;
                  last_z = z;
                } 
            
            }
        </script>
            
    </body>
</html>
